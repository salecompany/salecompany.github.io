!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=3)}({3:function(e,t,n){e.exports=n("JO1w")},Bcc3:function(e,t){var n=store.get("cookie-policy")||{},r=function(e,t){n[e]=t,store.set("cookie-policy",n)};window.cookiePolicyAnswer=function(e){return function(e){return!1!==n[e]}(e)},$(document).ready(function(){$(".js-cookies-accept").on("click",function(e){return e.preventDefault(),n={},store.remove("cookie-policy"),r("cookie-notification",!1),$("#cookies-popup-div").remove(),!1}),"cookie-policy-disagree"===$("body").data("page")&&($("input").on("change",function(){var e;e=$(this),r($(e).attr("name"),"1"===$(e).val())}),$.each(n,function(e,t){$("body").find('input[name="'+e+'"][value="'+(0|t)+'"]').click()}))})},C2KU:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}window.performance&&2===window.performance.navigation.type&&window.location.reload(),navigator.onLine&&setTimeout(function(){window.location.reload()},864e5),window.resultSliderSettings={variableWidth:!1,slidesToShow:2,dots:!1,prevArrow:!1,nextArrow:!1,responsive:[{breakpoint:1024,settings:{slidesToShow:1,variableWidth:!1}},{breakpoint:768,settings:{slidesToShow:1,variableWidth:!1,dots:!0}}]},window.getAnswers=function(){return store.get("answers")||{}},window.setAnswer=function(e,t){var n=getAnswers();n[e]=t,store.set("answers",n)},window.getAnswersData=function(e){return getAnswers().data?getAnswers().data[e]:""},window.removeAnswer=function(e){var t=getAnswers();delete t[e],store.set("answers",t)},window.removeAnswersData=function(){var e=getAnswers();delete e.data,store.set("answers",e)},window.clearUserData=function(){var e=window.getAnswers(),t=["measurements","bodyClass","data"];for(key in e)t.includes(key)||delete e[key],"data"===key&&(delete e[key].can_generate,delete e[key].measurement,delete e[key].uuid,delete e[key].temporary_code,store.set("answers",e))},window.urlContainsUUID=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.pathname;return RegExp(window.backEndVars.systemType+"/[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}").test(e)},window.setTimerDuration=function(e){sessionStorage.setItem("timerDuration",e)},window.getTimerDuration=function(){return parseInt(sessionStorage.getItem("timerDuration"))||0},window.timerDurationInit=function(e){window.getTimerDuration()||window.setTimerDuration(e)},window.executeTimer=function(){if(document.querySelector(".countdown-clock")){var e=$(".countdown-clock");window.timerDurationInit(60*e.data("minutes"));var t=e.FlipClock(window.getTimerDuration(),{clockFace:"MinuteCounter",countdown:!0,callbacks:{interval:function(){window.setTimerDuration(this.factory.getTime().time)},stop:function(){t.setTime(60*e.data("minutes")),t.start()}}})}},window.getProducts=function(){return store.get("noMeatProducts")||{}},window.getNoMeatChecked=function(){return store.get("noMeatIconChecked")||{}},window.removeNoMeatProducts=function(){return localStorage.removeItem("noMeatProducts")},window.setNoMeatProducts=function(e,t){var n=getProducts();n[e]=t.id,store.set("noMeatProducts",n)},window.setNoMeatChecked=function(e,t){var n=getNoMeatChecked();n[e]=t,store.set("noMeatIconChecked",n)},window.getResendFormVisibility=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=store.get("resendFormVisibilityPerDiet")||{};return e?t[e]:t},window.setResendFormVisibility=function(e,t){var n=getResendFormVisibility();n[e]=t,store.set("resendFormVisibilityPerDiet",n)},window.setPixelData=function(e,t,n){var r=store.get("pixelData")||{};r[e]||(r[e]={}),r[e][t]=n,store.set("pixelData",r)},window.getPixelData=function(e){return store.get("pixelData")&&store.get("pixelData")[e]||{}},window.convertFootToInch=function(e){return 12*e},window.converInchToCm=function(e){return 2.54*e},window.convertFootToCm=function(e){return window.converInchToCm(window.convertFootToInch(e))},window.convertPoundToKg=function(e){return.45359237*e},window.checkLoseOrGainWeight=function(){var e=getPixelData("User Profile").weight,t=getPixelData("User Profile").target_weight;if(e&&t)return e>t?"lose_weight":e<t?"gain_weight":"keep_weight"},window.setPixelDataMeasurements=function(e,t){var n=JSON.parse(JSON.stringify(t));switch(n.type){case"metric_age":case"imperial_age":n.type="age";break;case"height_cm":n.type="height";break;case"height_ft":n.type="height",n.value=getPixelData(e).height?getPixelData(e).height+window.convertFootToCm(n.value):window.convertFootToCm(n.value);break;case"height_inch":n.type="height",n.value=getPixelData(e).height?getPixelData(e).height+window.converInchToCm(n.value):window.converInchToCm(n.value);break;case"weight_kg":n.type="weight";break;case"weight_lb":n.type="weight",n.value=convertPoundToKg(n.value);break;case"weight_target_kg":n.type="target_weight";break;case"weight_target_lb":n.type="target_weight",n.value=convertPoundToKg(n.value)}window.setPixelData(e,n.type,Math.round(n.value)),window.checkLoseOrGainWeight()&&window.setPixelData(e,window.checkLoseOrGainWeight(),1)},window.trackFacebookUserDiet=function(e){var t=JSON.parse(JSON.stringify(e));t.achievable_weight=Math.round(convertPoundToKg(t.achievable_weight)),t.ideal_weight_from=Math.round(convertPoundToKg(t.ideal_weight_from)),t.ideal_weight_to=Math.round(convertPoundToKg(t.ideal_weight_to)),t.can_generate=t.can_generate?1:0,t[t.measurement]=1,delete t.measurement,delete t.uuid,Object.keys(t).forEach(function(e){window.setPixelData("User Profile",e,t[e])}),window.trackFacebookCustomEvent("User Profile")},window.removePixelData=function(){store.set("pixelData",{})},window.trackFacebookCustomEvent=function(e){window.getPixelData(e)&&window.fbq&&"jen"!==backEndVars.design&&window.fbq("trackCustom",e,window.getPixelData(e))},window.setFingerprint=function(e){store.set("fingerprint",e)},window.getFingerprint=function(){return store.get("fingerprint")?store.get("fingerprint"):[]},window.removeFingerprint=function(){store.set("fingerprint",[])},window.setUUID=function(e){if(e){var t=getAnswers();t.data||(t.data={}),t.data.uuid=e,store.set("answers",t)}},window.setCustomerUUID=function(e){if(e){var t=getAnswers();t.data||(t.data={}),t.data.customerUuid=e,store.set("answers",t)}},window.getHost=function(){var e=window.location;return e.protocol+"//"+e.hostname+(e.port?":"+e.port:"")},window.failedPayments=function(e,t){var n=getAnswers().failedPayments||[];n.push(e),window.setAnswer("failedPayments",n),window.setAnswer("showPaymentError",t||!0)},window.toDecimal=function(e){return parseFloat(e).toFixed(1)};var a,s,c,d,l,u=navigator.userAgent.toLowerCase();window.isAndroidMobile=u.indexOf("android")>-1&&(u.indexOf("mobile")>-1||-1===u.indexOf("chrome")),window.isIOSMobile=/ipad|iphone|ipod/.test(u)&&!window.MSStream,window.isNewestIos=function(){var e=u.match(/os (\d{1,})_\d/);return!!e&&(window.isIOSMobile&&e[1]>11)},String.prototype.insertBeforeLastOccurrence=function(e,t){var n=this.lastIndexOf(e);if(n>-1)return this.substring(0,n)+t+this.substring(n)},$.fn.isInViewport=function(){var e=$(this).offset().top,t=e+$(this).outerHeight(),n=$(window).scrollTop(),r=n+$(window).height();return t>n&&e<r},$.fn.isInViewportWithOffset=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,t=$(this).offset().top,n=t+$(this).outerHeight(),r=$(window).scrollTop(),o=r+$(window).height();return n>r+e&&t<o-e},window.isIE10=navigator.userAgent.match(/MSIE 10/i),window.isIE11=/Trident.*rv:/.test(navigator.userAgent),window.loadScript=function(e,t){var n=document.createElement("script");n.type="text/javascript",n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,t())}:n.onload=function(){t()},n.src=e,document.getElementsByTagName("head")[0].appendChild(n)},$(document).ready(function(e){e.ajaxSetup({beforeSend:function(t){t.setRequestHeader("X-CSRF-TOKEN",e('meta[name="csrf-token"]').attr("content"))}}),e(".back-button").length&&(closeWindow=!1,"email-first"===document.referrer.split("/").pop()&&(closeWindow=!0)),e(".back-button").click(function(t){t.preventDefault();var n=e(this).data("href");return closeWindow?window.close():"back"===n?window.history.back():window.location=n}),e("select.subject").change(function(){var t=e(this).find(":selected").attr("data-type"),n=e(this).find(":selected").attr("data-url");"access_support_center"===t||"meal_plan_not_received"===t&&!backEndVars.userDietsChecked?window.location.href=n:(e(".subject-controlled").show(),e(".back-btn-container-js").removeClass("col-xs-12"),e(".back-btn-container-js").removeClass("col-xs-offset-2"),e(".back-btn-container-js").addClass("col-xs-6"),e("#subject_type").val(t))}),e(".subject-controlled").is(":hidden")||(e(".back-btn-container-js").removeClass("col-xs-12"),e(".back-btn-container-js").removeClass("col-xs-8"),e(".back-btn-container-js").removeClass("col-xs-offset-2"),e(".back-btn-container-js").addClass("col-xs-6")),e(".scroll-top").click(function(){e("html, body").animate({scrollTop:0},"slow")}),{form:"#emailfill",init:function(){var t=e(this.form),n=t.find(".theme_tail_circle"),r=t.find("#email-form-submit"),o=function(){t.off("submit"),t.submit(),e("html, body").animate({scrollTop:0},"slow")},i=function(){n.fadeOut(150),r.prop("disabled",!1)},a=t.validate({errorClass:"a-input__input--error",rules:{email:{required:!0,email:!0,normalizer:function(e){return e.trim()}}},submitHandler:function(){var s=t.find(e('input[name="email"]')[0]).val(),c="trainings"===window.backEndVars.systemType?(new Url).build("trainings","contact-info","validate-email"):(new Url).build("contact-info","validate-email");n.fadeIn(150),r.prop("disabled",!0),e.ajax({type:"post",url:c,dataType:"json",data:{email:s},success:function(e){!0===e.status?o():!0===e.isBlacklisted?a.showErrors({email:"There is a temporary issue with this email provider.  Please use other email address in order to receive promptly all our emails."}):a.showErrors({email:"Please enter a valid email address"}),i()},error:function(e){429==e.status?a.showErrors({email:e.responseJSON.error}):o(),i()}})}})}}.init()}),a={dom:{resultSlider:".js-result-slider",next:".js-result-slider-next",prev:".js-result-slider-prev"},init:function(){var e=this;this.resultSlider=$(this.dom.resultSlider),this.next=$(this.dom.next),this.prev=$(this.dom.prev),this.resultSlider.slick(window.resultSliderSettings),this.next.on("click",function(){return e.resultSlider.slick("slickNext")}),this.prev.on("click",function(){return e.resultSlider.slick("slickPrev")})}},$(function(){a.init()}),Array.from||(Array.from=(s=Object.prototype.toString,c=function(e){return"function"==typeof e||"[object Function]"===s.call(e)},d=Math.pow(2,53)-1,l=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),d)},function(e){var t=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var n,r=arguments.length>1?arguments[1]:void 0;if(void 0!==r){if(!c(r))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(n=arguments[2])}for(var o,i=l(t.length),a=c(this)?Object(new this(i)):new Array(i),s=0;s<i;)o=t[s],a[s]=r?void 0===n?r(o,s):r.call(n,o,s):o,s+=1;return a.length=i,a})),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;var o,i,a=0|t,s=Math.max(a>=0?a:r-Math.abs(a),0);for(;s<r;){if((o=n[s])===(i=e)||"number"==typeof o&&"number"==typeof i&&isNaN(o)&&isNaN(i))return!0;s++}return!1}}),window.saveCheckboxPluginData=function(){var e=getAnswers();e.data||(location.href="/"),$.ajax({type:"patch",url:"/messenger/user-diet",data:{checkboxPluginState:window.checkboxPluginState,checkboxPluginView:window.checkboxPluginView,uuid:e.data.uuid}})},window.storeMarketingInfo=function(){var e,t,n,a,s,c;function d(e,t){store.set(e,r({},store.get(e)||{},t))}e=window.location.search,t=function(e){return e.substring(1).split("&").filter(function(e){return e.startsWith("utm")}).map(function(e){return e.split("=").map(decodeURIComponent)}).reduce(function(e,t){var n=i(t,2),a=n[0],s=n[1];return r({},e,o({},a,s))},{})}(e),Object.keys(t).length&&d("marketing",{utmParams:t}),n=window.screen,a=window.devicePixelRatio,s=n.width,c=n.height,d("marketing",{screen:{width:s*a,height:c*a}})},window.getMarketingInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=store.get("marketing")||{};return e?t[e]:t},window.Url=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,(r=[{key:"build",value:function(){return"".concat(window.getHost(),"/").concat(this._joinWithSlashes.apply(this,arguments))}},{key:"cdn",value:function(){return"".concat(this._trimSlashes(backEndVars.cdn),"/").concat(this._joinWithSlashes.apply(this,arguments))}},{key:"redirectTo",value:function(){window.location.href=this.build.apply(this,arguments)}},{key:"_ensureString",value:function(e){return"".concat(e)}},{key:"_trimSlashes",value:function(e){return this._ensureString(e).replace(/(^\/*|\/*$)/g,"")}},{key:"_joinWithSlashes",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.map(function(t){return e._trimSlashes(t)}).join("/")}}])&&n(t.prototype,r),o&&n(t,o),e}()},E4TI:function(e,t){Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r})},JO1w:function(e,t,n){n("E4TI"),n("Bcc3"),n("C2KU"),n("xwqF"),n("j71I"),n("Y+Vk"),n("upW3"),n("RhCz"),n("kc7/")},RhCz:function(e,t){function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}$(document).on("click","#buttonDownload",function(){!function(){var e=$(".loader"),t=$(".download-plan-button"),r=$("#error_generate_pdf"),o={uuid:location.pathname.match(/diets\/(.*)\/week/)[1],week:location.pathname.replace(/^.+\/week\//,"")};function i(n,r){if(r>20)return a();$.ajax({type:"get",url:getHost()+"/diets/show-plan?"+s(n),success:function(o){var a=o.path;if(!a)return setTimeout(function(){return i(n,r+1)},1e3);t.attr("disabled",!1),e.css("display","none"),n.path=a,function(e){window.location.href=getHost()+"/diets/download-plan?"+s(e)}(n)},error:function(){setTimeout(function(){return i(n,r+1)},1e3)}})}function a(){t.attr("disabled",!1),e.css("display","none"),r.show()}function s(e){return Object.entries(e).map(function(e){var t=n(e,2),r=t[0],o=t[1];return"".concat(r,"=").concat(o)}).join("&")}e.css("display","inline-flex"),t.attr("disabled",!0),r.hide(),$.ajax({method:"post",url:getHost()+"/diets/generate-pdf-meal-plan",data:o,success:function(e){o.fileName=e,i(o,1)},error:function(){a()}})}()})},"Y+Vk":function(e,t,n){$(document).ready(function(){var e=$("#paypal-button");$(e).length&&($("form").on("submit",function(){return!1}),paypal.Button.render({env:"production",style:{size:"responsive",color:"gold",shape:"rect",label:"pay",tagline:!1},client:{sandbox:$("#paypal-client-id").text(),production:$("#paypal-client-id").text()},commit:!0,payment:function(t,n){window.ga&&window.ga("send","event","Payment","Click",window.location.hostname),$.ajax({type:"post",url:getHost()+"/contact-info/paypal",data:{_method:"patch",uuid:getAnswersData("uuid")},success:function(e){getAnswersData("can_generate")||(window.location.href=window.getHost()+"/meal-plan-error"),window.setUUID(e.uuid)},error:function(){window.failedPayments($("#paypal-button").data("special")),window.location.reload()}});var r=$(e).find(".total").text(),o=$(e).find(".currency").text(),i=$(e).find(".descriptor").text();return n.payment.create({payment:{intent:"sale",transactions:[{amount:{total:r,currency:o,details:{subtotal:r}},custom:getAnswersData("uuid"),description:i,soft_descriptor:i,item_list:{items:[{name:i,description:i,price:r,quantity:1,currency:o}]}}]},experience:{input_fields:{no_shipping:1}}})},onAuthorize:function(e,t){return t.payment.execute().then(function(){e._method="patch",e.uuid=getAnswersData("uuid"),$.ajax({type:"post",url:"/payments/paypal/request",data:e,success:function(e){e&&e.uuid?e.error?window.location.href=window.getHost()+"/168":t.redirect(window,getHost()+"/diets/"+e.uuid+"/upsales"):window.location.href=window.getHost()+"/167"},error:function(){window.failedPayments($("#paypal-button").data("special")),window.location.reload()}})})},onError:function(e){window.failedPayments($("#paypal-button").data("special"),$("#paypal-button-error").text()),window.location.reload()}},"#paypal-button"))})},j71I:function(e,t,n){"use strict";function r(){if(document.querySelector(".o-header__timer-addon")){document.querySelector(".o-header__timer-addon").style.display="flex";var e=document.querySelector("#offer-expiry");if(void 0!==e&&null!=e){n=e,r=t=900,setInterval(function(){var e=parseInt(r/60,10),o=parseInt(r%60,10);e=e<10?"0"+e:e,o=o<10?"0"+o:o,n.textContent=e+":"+o,--r<0&&(r=t)},1e3)}window.onscroll=function(e){document.scrollingElement.scrollTop>200?(document.querySelector(".o-header__timer-addon").style.display="none",document.querySelector(".hidden-mobile-fix").style.display="flex"):(document.querySelector(".o-header__timer-addon").style.display="flex",document.querySelector(".hidden-mobile-fix").style.display="none"),document.scrollingElement.scrollTop>2e3&&document.scrollingElement.scrollTop<2700?document.querySelector(".o-header").style.display="none":document.querySelector(".o-header").style.display="block"}}var t,n,r}function o(){if(document.querySelector(".slideshow-container")){var e=0,t=document.querySelectorAll(".slideshow-screen img"),n=document.querySelectorAll(".slideshow-headline h2");setInterval(function(){for(var r=0;r<t.length;r++)t[r].style.opacity=0,n[r].style.opacity=0;e=e!=t.length-1?e+1:0,t[e].style.opacity=1,n[e].style.opacity=1},3e3)}}n.r(t),$(document).ready(function(e){function t(e){for(var t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var r=t[n].split("=");if(r[0]==e)return r[1]}return!1}["#select-payment-method","#subscription"].indexOf(window.location.hash)>-1&&(e("#email-first-payment-method-select").removeClass("hidden-2").show(),e("#email-form").hide()),["#subscription"].indexOf(window.location.hash)>-1&&i(),["#select-payment-method"].indexOf(window.location.hash)>-1&&(backEndVars.countdownTimerEnabled&&window.executeTimer(),"usd.yourketo.diet"===window.location.hostname?document.querySelector(".keto-design .o-header")&&document.querySelector(".o-header").classList.add("js-header"):document.querySelector(".keto-design .o-header")&&document.querySelector(".o-header").classList.add("o-header--light","js-header"),document.querySelector(".o-header__right")&&document.querySelector(".o-header__right").classList.remove("hidden"),r(),o()),"#stripe-card-payment"===window.location.hash&&(e("#stripe-elements-payment-form").show(),e("#email-form").hide(),document.querySelector(".keto-design .o-header")&&document.querySelector(".o-header").classList.remove("o-header--light","js-header"),document.querySelector(".o-header__right")&&document.querySelector(".o-header__right").classList.add("hidden")),"#braintree-hosted-fields"===window.location.hash&&(e("#braintree-hosted-fields-payment-form").show(),e("#email-form").hide(),document.querySelector(".keto-design .o-header")&&document.querySelector(".o-header").classList.remove("o-header--light","js-header"),document.querySelector(".o-header__right")&&document.querySelector(".o-header__right").classList.add("hidden")),t("trid")&&setAnswer("transaction_id",t("trid")),window.redirectUnfilledPage=function(){var t=[],n=[],r=window.location.pathname.substr(1);for(var o in e.each(e(".page .page-id"),function(t,r){n.push(parseInt(e(r).text()))}),e.each(Object.keys(getAnswers()),function(e,n){var r=n.split("."),o=parseInt(r[0]);isNaN(o)||-1!==t.indexOf(o)||t.push(o)}),n){var i=n[o],a=e(".page .page-slug").eq(o).text();if(a===r)break;if(-1===t.indexOf(i))return window.location.href=window.getHost()+"/"+a,!0}};var n=function(){var t=e(".js-paypal-loader").is(":visible")?e(".js-paypal-loader:visible"):e(".js-secured-parent:visible"),n=e(t).is(":visible")?e(t).offset().top+(e(t).height()-e(window).height())/2:0;e("html, body").animate({scrollTop:n},"fast")};function i(){backEndVars.countdownTimerEnabled&&window.executeTimer(),e("#limited-offer-title").addClass("hidden")}backEndVars.countdownTimerEnabled&&e(".js-spm-v2").length&&backEndVars.countdownTimerEnabled&&window.executeTimer(),e(".diet-refresh").length&&setTimeout(function(){window.location.reload(!0)},3e3),e("#page-type").length&&-1===document.referrer.indexOf(document.location.hostname)&&redirectUnfilledPage(),e(".clearAll").on("click",function(){var t=e(this).find("input"),n=e(t).prop("checked");e('input[type="checkbox"]:not("#'+e(t).attr("id")+'")').prop("checked",!n)}),e('input[type="checkbox"]').on("click",function(){if(e(".clearAll").length&&!e(this).closest(".clearAll").length){var t=e(".clearAll").find("input"),n=e('input[type="checkbox"]:not("#'+e(t).attr("id")+'"):checked').length>0;e(t).prop("checked",!n)}});var a=function(t){var n,r;window.removePixelData(),t.hasClass("bodyClass")&&(n=t,(r=getAnswers().bodyClass)||(r={}),r[e(n).data("key")]=e(n).data("body-class-value"),window.setAnswer("bodyClass",r)),window.setAnswer(t.data("key"),parseInt(t.data("value"))),window.setPixelData(t.data("pixel-event"),t.data("pixel-key"),t.data("pixel-value")),t.data("href")&&(window.location.href=window.getHost()+t.data("href")),window.trackFacebookCustomEvent(t.data("pixel-event"))};if(t("landing")){var s=window.location.search.substring(1).split("&"),c={};s.forEach(function(e){var t=e.split("=");c[t[0]]=decodeURI(t[1])}),a(e("<div>",{class:"bodyClass",data:c}))}function d(t){var n=e(t).closest(".dietMove");n.hasClass("measurements")?n.submit():l(n)}function l(t){!function(t){window.removePixelData();var n=e(".clearAll input");if(e(n).length&&window.setAnswer(e(n).data("key"),""),e(t).hasClass("measurements")){var r={};e('input[type="number"]:visible').each(function(n,o){if(!n){var i=parseInt(e(o).data("key").toString().split(".")[0]),a=Object.keys(getAnswers());for(var s in a){var c=a[s],d=c.split(".");parseInt(d[0])===i&&window.removeAnswer(c)}}var l={};l.name=e(o).data("measurement"),l.type=e(o).attr("name"),l.measuring_in=e(o).data("measuring_in"),l.value=e(o).val(),r[e(o).data("key")]=l,window.setAnswer("measurements",r),window.setAnswer(e(o).data("key"),e(o).val()),window.setPixelDataMeasurements(e(t).data("pixel-event"),l)})}else e('input[type="checkbox"]',e(t)).each(function(t,n){"noMeat"!==e(n)[0].id&&(window.setAnswer(e(n).data("key"),e(n).is(":checked")?e(n).data("value"):0),window.setPixelData(e(n).data("pixel-event"),e(n).data("pixel-key"),e(n).is(":checked")?e(n).data("value"):0))}),e('input[type="radio"]',e(t)).each(function(){var t=e("input:radio[name="+e(this).attr("name")+"]:checked").data("value");window.setAnswer(e(this).data("key"),t||0),window.setPixelData(e(this).data("pixel-event"),e(this).data("pixel-key"),t||0)}),e("#noMeat").length&&window.setNoMeatChecked(0,e("#noMeat").is(":checked"))}(t),window.location.href=window.getHost()+(t.data("href")?t.data("href"):t.attr("action")),window.trackFacebookCustomEvent(t.data("pixel-event"))}if(e(".dietAnswer").on("click",function(){a(e(this))}),e(".dietMove button").on("click",function(t){var n;t.preventDefault(),parseInt(e("#warningModalIsEnabled").text())?(n=this,0==e(".number-of-checked:checked").length&&e(".js-on-products-number").length&&!e("#noMeat").is(":checked")?(e(".products-modal").css("display","block"),e(".m-progress-bar__overlay").css("opacity","1"),e(".m-progress-bar__overlay").css("visibility","visible"),e(".m-progress-bar__overlay").css("z-index","103")):d(n)):d(this)}),e(".dietMove #continue").on("click",function(e){d(this)}),e(".dietMove.measurements").on("submit",function(t){t.preventDefault();var n=e(this);if(!n.valid())return!1;l(n)}),e("body").hasClass("pb")&&e("input").each(function(t,n){var r=getAnswers();if(void 0!==r[e(n).data("key")])switch(e(n).attr("type")){case"radio":case"checkbox":var o=e(n).data("value")===r[e(n).data("key")];e(n).attr("checked",o);break;case"number":e(n).val(r[e(n).data("key")]).focus().blur()}}),e("#generateDiet").length){window.setAnswer(e("#processing").data("key"),e("#processing").data("value"));var u=Math.floor(500*Math.random())+500;setTimeout(function(){var t=getMarketingInfo("screen");e.ajax({type:"post",url:"/"+backEndVars.systemType,data:{data:getAnswers(),marketing:{fingerprint:getFingerprint(),gaClientId:window.gaClientId,width:t&&t.width,height:t&&t.height,utmParams:getMarketingInfo("utmParams")}},success:function(e){e.error?window.location.href=window.getHost()+"/161":e.customerInfo?(window.removeAnswersData(),window.setAnswer("data",e.customerInfo),window.trackFacebookUserDiet(e.customerInfo),window.generateDietSuccess=!0,window.fbAsyncInit&&window.fbAsyncInit(e.customerInfo.uuid)):window.location.href=window.getHost()+"/162"},error:function(t,n,r){400===t.status&&(TweenMax.killAll(),e("#start-over-section").show(),e("#error-text").show(),e("#processing-text").hide(),e(".fb-messenger-checkbox").hide()),window.generateDietSuccess=!0}})},u)}if(e("#start-over-button").on("click",function(){window.location="/"}),e("body").delegate("form.patch","submit",function(t){window.cookiePolicyAnswer("persistent")&&window.setAnswer("saved-email",e(".js-save-email:first").val());var n=this,a=setInterval(function(){clearInterval(a),e.ajax({type:"PUT",url:getHost()+"/"+backEndVars.systemType,data:{email:e(n).find('input[name="email"]').val(),uuid:getAnswersData("uuid"),receive_newsletter:e("#accept-subscribe-to-our-newsletter").is(":checked"),paymentMethod:e("#payment-method-selected").text()},success:function(t){if(t)if(t.error)window.location.href=window.getHost()+"/158";else if(!1!==t.canGenerate){window.setUUID(t.uuid);var n=window.location.pathname;backEndVars.isPaymentFlowTypeSubscription?(n+="#subscription",i()):"us.yourketo.diet"===t.domain?n=getHost()+"/contact-info/select-payment-method":(n+="#select-payment-method",backEndVars.countdownTimerEnabled&&window.executeTimer(),r(),o()),"us.yourketo.diet"!==t.domain||backEndVars.isPaymentFlowTypeSubscription?(history.replaceState(null,null,n),e("#email-first-payment-method-select").removeClass("hidden-2").show(),e("#email-form").hide(),e(".js-result-slider").slick("destroy").slick(window.resultSliderSettings),e(document.querySelector("#pay")).length>0&&(e(document.querySelector("#pay")).isInViewportWithOffset()||backEndVars.isPaymentFlowTypeSubscription||(document.querySelector(".keto-design .o-header")&&document.querySelector(".o-header").classList.add("o-header--light","js-header"),document.querySelector(".o-header__right")&&document.querySelector(".o-header__right").classList.remove("hidden")))):window.location.href=n}else window.location.href=window.getHost()+"/meal-plan-error";else window.location.href=window.getHost()+"/157"},error:function(){window.failedPayments(e("#payment-method-selected").text()),window.location.href=window.getHost()+"/"+e(".final .finalPage-slug").text()+"#get-plan"}})},60);t.preventDefault()}),e("div.o-profile-summary").length||e("div.o-section-summary")){var m=window.toDecimal(getAnswersData("bmi")),h=m.toString().split("."),f="";e("#bmi").text(h[0]+","),f=h[1]<10?10*h[1]:h[1]||0,m<16.5?e("#bmi-text-1").removeClass("hidden-bmi"):m<18.5?e("#bmi-text-2").removeClass("hidden-bmi"):m<25?e("#bmi-text-3").removeClass("hidden-bmi"):m<30?e("#bmi-text-4").removeClass("hidden-bmi"):m<35?e("#bmi-text-5").removeClass("hidden-bmi"):m<40?e("#bmi-text-6").removeClass("hidden-bmi"):m>40&&e("#bmi-text-7").removeClass("hidden-bmi"),e("#bmi-sup").text(0!==f?f:"00"),e.each(getAnswers().measurements,function(t,n){getAnswersData("measurement")===n.name&&("age"===n.type||"age"===n.type.split("_").pop()?(e("#metabolic-age").text(getAnswersData("metabolic_age")+" "+n.measuring_in),e("#years").text(n.value),e("#years-text").text(n.measuring_in)):-1!==n.type.indexOf("height")?"height_inch"===n.type?n.value?e("#fp-height").text(e("#fp-height").text()+"."+n.value):e("#fp-height").text(toDecimal(e("#fp-height").text())):(e("#fp-height").text(n.value),e("#fp-height-text").text(n.measuring_in)):-1!==n.type.indexOf("weight")&&-1===n.type.indexOf("target")&&(e("#u-weight").text(n.value),e("#u-weight-text").text(n.measuring_in)))})}function p(t){e.get({url:t}).done(function(t){e(".js-meal-body").fadeOut("fast",function(){e(this).html(t.view),e("body").attr("class")&&e.each(e("body").attr("class").split(/\s+/),function(e,t){window.ketoChangeGenderImages(t)}),e(this).fadeIn("fast")})})}function w(){var t=e('select[name="week"]').find("option:selected").text();e(".a-meal-week__text").length?e(".a-meal-week__text").text(t):e(".a-meal-week").text(t)}function g(t){var n=e('select[name="week"] option:selected')[t]();if(n.length){var r=e(this).closest(".js-week-form").find(".nice-select"),o=r.find('li[data-value="'+n[0].value+'"]');n.prop("selected",!0).trigger("change"),r.find("li").removeClass("selected"),o.addClass("selected"),r.find(".current").text(e.trim(o.text())),window.dataLayer=window.dataLayer||[],dataLayer.push({vpv:"spaPageview",uuid:e("#uuid").text(),weekNumber:location.pathname.replace(/^.+\/week\//,"")})}}e(".button-weeks-right").on("click",function(){g.call(this,"next")}),e(".button-weeks-left").on("click",function(){g.call(this,"prev")});var y=window.location.pathname.split("/")[4];function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";setTimeout(function(){!function(e,t){b(e,t).then(function(n){if(k(n))x(n);else{setTimeout(function(){!function e(t,n,r){r--;var o=0==r;b(t,n,o).then(function(o){k(o)?x(o):0!=r?setTimeout(function(){e(t,n,r)},5e3):x(o)})}(e,t,7)},5e3)}})}(e,t)},3e4)}function b(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=""==n?"":"?email="+encodeURIComponent(n);return r&&(o+=o.length>0?"&last-try=true":"?last-try=true"),e.ajax({type:"get",url:getHost()+"/diets/"+t+"/email-delivery-status"+o})}function k(e){return 1==e.success&&0==e.deferred}function x(t){e("#resend-email-block #undelivered-email-message #undelivered-email-reason").html(t.reason),1==t.delivered?(e("#resend-email-block #undelivered-email-message .email-status-delivered").show(),e("#resend-email-block #undelivered-email-message .email-status-undelivered").hide(),e("#resend-email-block #undelivered-email-message .email-status-unknown").hide()):1==t.success?(e("#resend-email-block #undelivered-email-message .email-status-undelivered").show(),e("#resend-email-block #undelivered-email-message .email-status-delivered").hide(),e("#resend-email-block #undelivered-email-message .email-status-unknown").hide()):(e("#resend-email-block #undelivered-email-message .email-status-undelivered").hide(),e("#resend-email-block #undelivered-email-message .email-status-delivered").hide(),e("#resend-email-block #undelivered-email-message .email-status-unknown").show()),e(".emailmeal-on-diets-page input[name=email]").val(""),e("#resend-email-block").show(),e("#email-delivery-success").hide(),e("#email-delivery-pending").hide()}function _(e,t,n){e.data("desktop-img",n),e.attr("src",t)}e('select[name="week"]').val(y),e('select[name="week"]').on("change",function(){var t=e(this).find("option:selected").val();void 0===t&&(e(this).val(1),t=1),w();var n=e(".o-section-content--meal").data("lds-loader-color")||"",r=location.href.replace(/week\/.+$/,""),o=r+"week-view/"+t;e(".js-meal-body").fadeOut("fast",function(){e(this).html('<div class="lds-container"><div class="lds-default '+n+'"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div>').fadeIn("fast")}),history.pushState(null,null,r+"week/"+t),p(o)}),e("#diet-cache-exists").length&&"0"===e("#diet-cache-exists").text()&&e('select[name="week"]').trigger("change"),e('select[name="week"]').length&&(window.onpopstate=function(t){var n=location.pathname.replace(/^.+\/week\//,""),r=location.href.replace(/week\/.+$/,"")+"week-view/"+n;e('select[name="week"]').val(n),w(),p(r),window.dataLayer=window.dataLayer||[],dataLayer.push({vpv:"spaPageview",uuid:e("#uuid").text(),weekNumber:n})}),e(".emailmeal, .emailmeal-on-diets-page").submit(function(t){if(t.preventDefault(),e(this).valid()){var n=e(this).find("input[name=uuid]").val(),r=e(this).find("input[name=email]").val(),o=e(this).find("input[name=logResend]").val(),i=e(this).attr("class");e("#email-delivery-success").hide(),e("#resend-email-block").hide(),e("#email-delivery-pending").show(),e.ajax({type:"post",url:getHost()+"/diets/resend",data:{uuid:n,email:r,logResend:o},success:function(t){t?t.error?window.location.href=window.getHost()+"/165":t.success?i.includes("emailmeal-on-diets-page")?v(n,r):(e("#resend-email-block").hide(),e(".m-email-sent-notification").removeAttr("style")):(e("#resend-email-block").show(),e("#email-delivery-pending").hide()):window.location.href=window.getHost()+"/164"},error:function(){e("#resend-email-block").show(),e("#email-delivery-pending").hide()}})}}),backEndVars.shouldInitEmailDeliveryStatusCheck&&v(backEndVars.userDietUUID),getAnswers().showPaymentError&&(!0!==getAnswers().showPaymentError&&e("#error_payment").text(getAnswers().showPaymentError),e("#error_payment").show(),removeAnswer("showPaymentError")),e("#measurements-button").on("click",function(){e("#metric-form").valid()&&e(".measurement-age").each(function(t,n){e(n).attr("name","age")})}),e(".m-block-contacts").length&&e(".o-footer").addClass("o-footer--shadow"),e.validator.addMethod("onlyOneDigitAfterTheDecimalPoint",function(e,t){return this.optional(t)||/^(\d{1,}|\d{1,}\.\d{1})$/.test(e)},"Please enter only one digit after the decimal point"),e(window).resize(function(){var t=e("[data-desktop-img]"),n=t.data("desktop-img"),r=t.attr("src");t.one("load",function(){e(this).fadeIn(250)}).each(function(){this.complete&&e(this).fadeIn(250)}),e(this).width()>=978&&!t.hasClass("desktop")&&(_(t,n,r),t.addClass("desktop")),e(this).width()<978&&t.hasClass("desktop")&&(_(t,n,r),t.removeClass("desktop"))}).trigger("resize"),e("#email-form-submit").on("click",function(){if(e("#accept-policies-conditions").length&&!e("#accept-policies-conditions").is(":checked"))return e("#policy-checkbox").addClass("policy-checkbox-border-error"),e("#policy-checkbox-error-msg").show(),!1}),e("#checkbox-for-policies").on("click",function(t){["data-protection-policy-link","terms-and-condition-link"].indexOf(t.target.id)>-1&&e("#accept-policies-conditions").is(":checked")?window.open(getHost()+e("#"+t.target.id).data("href"),"_blank"):(e("#policy-checkbox").removeClass("policy-checkbox-border-error"),e("#policy-checkbox-error-msg").hide(),e("#accept-policies-conditions").trigger("click"))}),e("#select-more").on("click",function(){e(".products-modal").css("display","none"),e(".m-progress-bar__overlay").css("opacity","0"),e(".m-progress-bar__overlay").css("visibility","hidden"),e(".m-progress-bar__overlay").css("z-index","101")}),e(".o-meal-table__body").on("click",".recipe-steps-view-link",function(e){e.stopPropagation()}),e(".js-duplicate-weight-fields").length&&(e("input[name='weight_kg'], [name='weight_lb']").on("input",function(){"weight_kg"===this.name?e("input[name='weight_target_kg']").val(e(this).val()):e("input[name='weight_target_lb']").val(e(this).val())}),e("input[name='weight_target_kg']").val(e("input[name='weight_kg']").val()),e("input[name='weight_target_lb']").val(e("input[name='weight_lb']").val())),e(".email-first-payment-method-selected").on("click",function(t){var r=e(t.target).closest(".paymentType").data("special"),o="trainings"===window.backEndVars.systemType?(new Url).build("trainings","contact-info","fill","email-first"):(new Url).build("contact-info","fill","email-first");e.ajax({type:"PUT",url:o,data:{paymentMethod:r,status:"paymentMethodSelectedAfterPersonalDataInserted",uuid:getAnswersData("uuid")},success:function(t){function o(n){var r="";history.replaceState(null,null,window.location.pathname+"#paypal"),document.querySelector(".keto-design .o-header")&&document.querySelector(".o-header").classList.remove("o-header--light","js-header"),document.querySelector(".o-header__right")&&document.querySelector(".o-header__right").classList.add("hidden"),r=backEndVars.usesNewPaymentSystem?t.customerUuid+"|$|"+t.uuid+"|$|"+backEndVars.paymentTypes["paypal-old"].purchasableType+"|$|"+n+"|$|"+backEndVars.paymentTypes["paypal-old"].systems_ping_urls.join("$$$"):t.uuid,e('#payment-form-external-redirect input[name="custom"]').val(r),e("#payment-form-external-redirect").submit()}window.setUUID(t.uuid),window.setCustomerUUID(t.customerUuid),"braintree"===r?(history.replaceState(null,null,window.location.pathname+"#card-payment"),e("#card-payment-form").show(),setTimeout(function(){n()},1500),document.querySelector(".keto-design .o-header")&&document.querySelector(".o-header").classList.remove("o-header--light","js-header"),document.querySelector(".o-header__right")&&document.querySelector(".o-header__right").classList.add("hidden")):"braintree-hosted-fields"===r?(history.replaceState(null,null,window.location.pathname+"#braintree-hosted-fields"),e("#braintree-hosted-fields-payment-form").show(),document.querySelector(".keto-design .o-header")&&document.querySelector(".o-header").classList.remove("o-header--light","js-header"),document.querySelector(".o-header__right")&&document.querySelector(".o-header__right").classList.add("hidden")):"stripe-elements"===r?"us.yourketo.diet"!==t.domain||backEndVars.isPaymentFlowTypeSubscription?(history.replaceState(null,null,window.location.pathname+"#stripe-card-payment"),e("#stripe-elements-payment-form").show(),document.querySelector(".keto-design .o-header")&&document.querySelector(".o-header").classList.remove("o-header--light","js-header"),document.querySelector(".o-header__right")&&document.querySelector(".o-header__right").classList.add("hidden"),setTimeout(function(){n()},1500)):window.location.href=getHost()+"/contact-info/stripe-elements":(e("#paypal-old-payment-form").show(),"trainings"===window.backEndVars.systemType?e.ajax({type:"POST",url:(new Url).build("trainings","payments","paypal","request"),data:{paymentMethod:r,status:"paymentProcessInitiated",uuid:getAnswersData("uuid"),customerUuid:getAnswersData("customerUuid")},success:function(){o(window.backEndVars.systemType)},error:function(t){window.failedPayments(e("#payment-method-selected").text(),t.responseJSON.error),window.location.href=window.getHost()+"/"+e(".final .finalPage-slug").text()+"#get-plan"}}):o(window.backEndVars.systemType)),e("#email-first-payment-method-select").hide()},error:function(t){window.failedPayments(e("#payment-method-selected").text(),t.responseJSON.error),window.location.href=window.getHost()+"/"+e(".final .finalPage-slug").text()+"#get-plan"}})}),e(".js-close-payment-form").on("click",function(){if("us.yourketo.diet"!==backEndVars.domain){var t=e(this).data("payment-form-id");e(t).hide(),history.replaceState(null,null,window.location.pathname+"#select-payment-method"),e("#email-first-payment-method-select").removeClass("hidden-2").show()}else window.history.back()}),e("#stripe-form").is(":visible")&&setTimeout(function(){n()},1e3),e("#noMeat").length&&getNoMeatChecked()[0]&&(e("#noMeat").prop("checked",!0),e(".a-checkbox").closest(".a-bradio").removeClass("a-checkbox--false")),e("#noMeat").on("click",function(){if(e(this).is(":checked")){removeNoMeatProducts();var t=0;e(".number-of-checked").each(function(){e(this).is(":checked")&&(setNoMeatProducts(t++,this),e(this).closest(".a-bradio").addClass("a-bradio--false"))}),e(".a-checkbox").closest(".a-bradio").removeClass("a-checkbox--false"),e(".number-of-checked").prop("checked",!1),e(".no-meat-disabled").prop("checked",!0)}else window.getProducts()[0]?(e(".a-checkbox").closest(".a-bradio").addClass("a-checkbox--false"),e.each(getProducts(),function(t,n){e("#"+n).prop("checked",!0),e("#"+n).closest(".a-bradio").removeClass("a-bradio--false")}),removeNoMeatProducts()):e(".number-of-checked").prop("checked",!0)}),e(".number-of-checked, .no-meat-disabled").on("click",function(){e("#noMeat").is(":checked")&&(removeNoMeatProducts(),e("#noMeat").prop("checked",!1),e("#noMeat").closest(".a-bradio").addClass("a-checkbox--false")),0==e(".number-of-checked:checked").length&&(e("#noMeat").prop("checked",!0),e("#noMeat").closest(".a-bradio").removeClass("a-checkbox--false"))}),e("#resend-form").length&&(getResendFormVisibility(backEndVars.userDietUUID)||e("#resend-form").css("display","block")),e(".js-close-resend-form").on("click",function(){setResendFormVisibility(backEndVars.userDietUUID,!0)}),e("#metric-form, #metric-imperial-form").length>0&&e("#metric-form, #metric-imperial-form").find("a[class*=active]").each(function(){e(e(this).attr("href")).find("input").each(function(){""!==e(this).val()&&e(this).addClass("valid")})}),e("#email-form-submit").on("click",function(){getAnswers().data||(location.href="/")})}),window.urlContainsUUID()&&window.clearUserData()},"kc7/":function(e,t){$(document).ready(function(e){e.each(e(".md-trigger"),function(t,n){var r=e("#"+n.getAttribute("data-modal")),o=e(r).find(".md-close"),i=function(t){e(r).removeClass("md-show"),e("body").css("overflow",""),t.stopPropagation()};window.repositionModal=function(){e(r).css("height","");var t=e(window).height(),n=e(r).height();e(r).css("height",Math.min(t,n)+"px").css("overflow-y",t<n?"scroll":"hidden")},e(window).resize(function(){repositionModal()}),e(n).on("click",function(){e(r).addClass("md-show"),repositionModal(),e("body").css("overflow","hidden")}),e(".md-overlay").on("click",i),e(o).on("click",i)})})},ls82:function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),a=new E(r||[]);return i._invoke=function(e,t,n){var r=l;return function(o,i){if(r===m)throw new Error("Generator is already running");if(r===h){if("throw"===o)throw i;return T()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=m;var c=d(e,t,n);if("normal"===c.type){if(r=n.done?h:u,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}(e,n,a),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l="suspendedStart",u="suspendedYield",m="executing",h="completed",f={};function p(){}function w(){}function g(){}var y={};y[i]=function(){return this};var v=Object.getPrototypeOf,b=v&&v(v(I([])));b&&b!==n&&r.call(b,i)&&(y=b);var k=g.prototype=p.prototype=Object.create(y);function x(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function _(e){var t;this._invoke=function(n,o){function i(){return new Promise(function(t,i){!function t(n,o,i,a){var s=d(e[n],e,o);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then(function(e){t("next",e,i,a)},function(e){t("throw",e,i,a)}):Promise.resolve(l).then(function(e){c.value=e,i(c)},function(e){return t("throw",e,i,a)})}a(s.arg)}(n,o,t,i)})}return t=t?t.then(i,i):i()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return f;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var o=d(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,f;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,f):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function I(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:T}}function T(){return{value:t,done:!0}}return w.prototype=k.constructor=g,g.constructor=w,g[s]=w.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},x(_.prototype),_.prototype[a]=function(){return this},e.AsyncIterator=_,e.async=function(t,n,r,o){var i=new _(c(t,n,r,o));return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},x(k),k[s]="Generator",k[i]=function(){return this},k.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),d=r.call(a,"finallyLoc");if(c&&d){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),f}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},o0o1:function(e,t,n){e.exports=n("ls82")},upW3:function(e,t,n){"use strict";n.r(t);var r=n("o0o1"),o=n.n(r);function i(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){s(e,t,n[t])})}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.braintreeDropInV1Loaded=!1,window.loadBraintreeDropInV1=function(){var e="braintree-drop-in-v1";if(!window.braintreeDropInV1Loaded){var t=!1;if("undefined"!=typeof braintree&&void 0!==braintree.client&&void 0!==braintree.dropin){window.braintreeDropInV1Loaded=!0;var n={element:document.querySelector("#".concat(e,"-card-details")),isDropIn:function(){return backEndVars.paymentTypes&&backEndVars.paymentTypes.braintree_drop_in},isBraintree:function(){return backEndVars.paymentTypes&&backEndVars.paymentTypes.braintree},paymentMethod:function(){return this.isDropIn()?"braintree_drop_in":this.isBraintree()?"braintree":null},dropInPaymentTypes:function(){return this.isDropIn()&&backEndVars.paymentTypes.braintree_drop_in.paymentMethods}},r={element:document.querySelector("#".concat(e,'-card-details input[type="submit"]')),enable:function(){this.element.disabled=!1,this.element.classList.remove("disabled")},disable:function(){this.element.disabled=!0,this.element.classList.add("disabled")}},s={auth:document.querySelector("#braintree-drop-in-token").textContent,container:"#dropin-container",paymentOptionPriority:function(){var e=backEndVars.paymentTypes&&backEndVars.paymentTypes.braintree_drop_in;return e?e.paymentMethods:null}},c={merchantId:document.querySelector("#braintree-drop-in-google-pay-merchant-id").textContent,transactionInfo:{totalPriceStatus:"FINAL",totalPrice:parseFloat(document.querySelector("#braintree-drop-in-total").textContent),currencyCode:document.querySelector("#braintree-drop-in-currency").textContent,checkoutOption:"COMPLETE_IMMEDIATE_PURCHASE"},cardRequirements:{billingAddressRequired:!0}},d={displayName:document.querySelector("#braintree-drop-in-product-label").textContent,paymentRequest:{total:{label:this.displayName,amount:parseFloat(document.querySelector("#braintree-drop-in-total").textContent)},requiredBillingContactFields:["postalAddress"]}},l={flow:"vault",amount:parseFloat(document.querySelector("#braintree-drop-in-total").textContent),currency:document.querySelector("#braintree-drop-in-currency").textContent},u={container:document.querySelector("#dropin-container"),hide:function(){this.container.classList.add("hidden")},show:function(){this.container.classList.remove("hidden")},paymentUpdate:function(t){return $.ajax({type:"post",url:getHost()+"/contact-info/fill/email-first",data:{_method:"patch",paymentMethod:"braintree_drop_in",status:"paymentMethodSelectedAfterPersonalDataInserted",uuid:getAnswersData("uuid")}}).done(function(e){var t=e.uuid;return window.setUUID(t)}).fail(function(t){var n=t.status,r=t.responseJSON;455===n?(new Url).redirectTo("meal-plan-error"):(payments.formError.display(e,r.error),payments.formLoader(e).hide()),u.show()})},showCardForm:function(e){u.show(),e.clearSelectedPaymentMethod()},executePayment:function(n,r){var o=this;return $.ajax({type:"post",url:backEndVars.braintreeDropInFormUrl,data:n}).done(function(i){if(i&&i.ok)if(backEndVars.usesNewPaymentSystem){var a=window.backEndVars.isPaymentFlowTypeSubscription?"subscription/is-paid":"is-paid";t=payments.checkPaymentStatusAndRedirect(e,(new Url).build("diets",n.uuid,a)),o.showCardForm(r)}else(new Url).redirectTo("diets",n.uuid,"upsales");else payments.formError.display(e,"Something went wrong. Please try again")}).fail(function(t){var n=t.status,i=t.responseJSON;455===n?(new Url).redirectTo("meal-plan-error"):(payments.formError.display(e,i.error),payments.formLoader.hide(e)),o.showCardForm(r)})},settings:a({authorization:s.auth,container:s.container,dataCollector:{kount:!0},paypal:!1},backEndVars.paymentTypes&&backEndVars.paymentTypes.braintree_drop_in&&{googlePay:{merchantId:c.merchantId,transactionInfo:c.transactionInfo,cardRequirements:c.cardRequirements},applePay:{displayName:d.displayName,paymentRequest:d.paymentRequest},paypal:{flow:l.flow,amount:l.amount,currency:l.currency},paymentOptionPriority:s.paymentOptionPriority()})};return function(){var r,a=(r=o.a.mark(function r(){var i;return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,braintree.dropin.create(u.settings);case 3:i=r.sent,r.next=9;break;case 6:return r.prev=6,r.t0=r.catch(0),r.abrupt("return",Promise.reject("Authentication is invalid."));case 9:payments.formLoader.hide(e),i.on("paymentOptionSelected",function(){return u.paymentUpdate()}),n.element.addEventListener("submit",function(r){r.preventDefault(),t||(t=!0,i.requestPaymentMethod().then(function(r){u.hide(),payments.formLoader.show(e),r.uuid=getAnswersData("uuid"),r.email=$("#email-field").val(),r.paymentMethod=n.paymentMethod(),n.isDropIn()&&1==n.dropInPaymentTypes.length?u.paymentUpdate().then(u.executePayment(r,i)):u.executePayment(r,i),t=!1}).catch(function(e){t=!1,u.show()}))});case 12:case"end":return r.stop()}},r,null,[[0,6]])}),function(){var e=this,t=arguments;return new Promise(function(n,o){var a=r.apply(e,t);function s(e){i(a,n,o,s,c,"next",e)}function c(e){i(a,n,o,s,c,"throw",e)}s(void 0)})});return function(){return a.apply(this,arguments)}}()().catch(function(t){payments.formError.display(e,t),r.disable(),payments.formLoader.hide(e)}),!0}}},$(document).ready(function(e){if(e(".braintree-drop-in-v1").length)var t=setInterval(function(){window.loadBraintreeDropInV1()&&clearInterval(t)},1e3)})},xwqF:function(e,t){window.checkWomanChangeColors=function(){var e=$(".o-section-content--meal").data("check-sex");if(window.ketoChangeGenderImages(),"man"===e)$("body").removeClass("woman-theme"),$("body").addClass("men-theme"),ketoChangeGenderImages("men-theme");else if("woman"===e)$("body").removeClass("men-theme"),$("body").addClass("woman-theme"),ketoChangeGenderImages("woman-theme");else{var t=window.getAnswers().bodyClass;if(!t)return;$.each(t,function(e,t){"/"!==window.location.pathname?($("body").addClass(t),window.ketoChangeGenderImages(t),"men-theme"===t?($("#b-steps-back-button").attr("src",backEndVars.designImgCdn+"/icons/back-men.svg"),$("#b-steps-help-button").attr("src",backEndVars.designImgCdn+"/icons/help-men.svg"),$(".highlighted--woman").removeClass("highlighted--woman"),$("#graph-age-man").removeClass("hidden"),$(".close-button-icon").attr("src",backEndVars.designImgCdn+"/icons/close-2-men.svg"),$(".m-profile-card__content img").attr("src",backEndVars.designImgCdn+"/man.svg"),$(".m-profile-card__content #man").show(),$(".m-credit-card__background").attr("src",backEndVars.cdn+"/img/card-2.svg"),$(".m-credit-card__back img").attr("src",backEndVars.cdn+"/img/card-back-2.svg")):"woman-theme"===t&&($("#b-steps-back-button").attr("src",backEndVars.designImgCdn+"/icons/back.svg"),$("#b-steps-help-button").attr("src",backEndVars.designImgCdn+"/icons/help.svg"),$("#graph-age-woman").removeClass("hidden"),$(".close-button-icon").attr("src",backEndVars.designImgCdn+"/icons/close-2.svg"),$(".m-profile-card__content img").attr("src",backEndVars.designImgCdn+"/woman.svg"),$(".m-profile-card__content #woman").show(),$(".m-credit-card__background").attr("src",backEndVars.cdn+"/img/card-2.svg"),$(".m-credit-card__back img").attr("src",backEndVars.cdn+"/img/card-back-2.svg"))):$("body").removeClass(t)})}},window.ketoChangeGenderImages=function(e){for(var t=[".a-input__icon--good",".a-button--with-gradient",".m-item-reason__icon",".m-item-condition__number",".o-meal-modal__detail-icon",".o-meal-modal__timer-icon",".m-block-contacts__icon",".m-meal-item__icon",".m-meal-item__timer-icon",".m-meal-item__detail-icon",".m-meal-item__detail-icon--preparation",".o-section-benefits__image",".a-icon m-item-reason__icon",".o-section-recs__icon",".problematic-body-parts-img",".a-image__body"],n=0;n<t.length;n++)$(t[n]).each(function(){var t=$(this),n=t.data("src");n&&("men-theme"===e?(t.attr("src",n.insertBeforeLastOccurrence(".svg","-men")),t.attr("src",n.insertBeforeLastOccurrence(".png","-men")),t.attr("src",n.insertBeforeLastOccurrence(".jpg","-men")),t.attr("src",n.insertBeforeLastOccurrence(".jpeg","-men"))):t.attr("src",n)),void 0!==t.data("image")&&void 0!==t.data("image-mobile")&&"men-theme"===e&&(t.css("background-image",t.css("background-image").insertBeforeLastOccurrence(".png","-men")),t.attr("data-image",t.data("image").insertBeforeLastOccurrence(".png","-men")),t.attr("data-image-mobile",t.attr("data-image-mobile").insertBeforeLastOccurrence(".png","-men"))),t.css("visibility","visible"),$(".o-meal-modal__detail-icon, .o-meal-modal__timer-icon").css("visibility","inherit")})},window.lazarChangeHeaderGenderImages=function(e){for(var t=["#header-image"],n=0;n<t.length;n++)$(t[n]).each(function(){var t=$(this);void 0!==t.data("image-"+e+"-url")?t.css("background-image","url("+t.data("image-"+e+"-url")+")"):t.css("background-image","url("+t.data("image-man-theme-url")+")"),t.css("visibility","visible")})}}});